from telegram import Update, ReplyKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, filters, ContextTypes

TOKEN = '8104465905:AAE45QOfgX6L6IpidS3kcMSgXwg8XF71obk'

# Respostas bÃ¡sicas
respostas_rapidas = {
    "acesso": "OfereÃ§o Acesso a uma quantidade de Onlyfans/privacy e aumentamos conforme pedidos.",
    "valor": "o aceso Ã© pago somente uma vez! apÃ³s isso desfrute e faÃ§a seu pedido, atenderemos a todos com o tempo. ğŸ’°",
    "pedidos": "Os pedidos sao anotados, e atendidos, demanda tempo de upload e afins. basta ter paciencia. â°",
    "pagamento": "Aceito Pix, cartÃ£o e boleto. Posso te mandar o link! ğŸ’³",
    "grupo": "VocÃª quer entrar no grupo exclusivo de alunos? Posso te mandar o link! ğŸ”—",
    "ocupado": "No momento estou ocupado, mas vocÃª pode deixar sua dÃºvida aqui que respondo assim que possÃ­vel. ğŸ˜‰"
}

# /start
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.effective_user
    msg = (
        f"OlÃ¡, {user.first_name}!\n\n"
        "Sou o assistente do Trapi ğŸ™ï¸\n"
        "VocÃª pode perguntar sobre:\n"
        "â€¢ Acesso Ã  ConteÃºdo\n"
        "â€¢ Valores\n"
        "â€¢ Formas de pagamento\n"
        "â€¢ Como entrar no grupo\n\n"
        "Ã‰ sÃ³ mandar sua mensagem!"
    )
    await context.bot.send_message(chat_id=update.effective_chat.id, text=msg)

# Mensagens comuns
async def responder_mensagem(update: Update, context: ContextTypes.DEFAULT_TYPE):
    texto = update.message.text.lower()

    for chave, resposta in respostas_rapidas.items():
        if chave in texto:
            await context.bot.send_message(chat_id=update.effective_chat.id, text=resposta)
            return

    await context.bot.send_message(chat_id=update.effective_chat.id, text="NÃ£o entendi bem ğŸ˜…, mas me explica melhor que eu te ajudo!")

# InicializaÃ§Ã£o
if __name__ == '__main__':
    app = ApplicationBuilder().token(TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, responder_mensagem))

    print("Bot rodando...")
    app.run_polling()
